---
---

首先明确一点，Git和SVN不同。
第一，SVN的仓库在服务器上，而Git是分布式的，每个终端上都有一个仓库。
第二，Git有个**暂存区**的概念，你的工程文件放在**工作区（Working Directory）**，`.git`目录是**版本库（Repository）**，
版本库中有一个称为stage（或者叫index）的**暂存区**。

## 查看仓库状态（哪些文件被修改了，哪些文件没添加...）

```
git status # 注意，如果已经commit了全部内容，则工作区是干净的，这个命令将放回`nothing to commit, working tree clean`
```

## 上传代码

```
git add    # 把文件修改添加到暂存区
git commit # 把暂存区的所有内容提交到当前分支
git push   # 将本地仓库变更内容上传到远程仓库
```
注意，没有添加到暂存区（即没有执行git add）的修改内容是不会被commit的，即使是对同一个文件的修改。
例如，有文件 bingo.txt
```
# 修改文件内容
git add bingo.txt # 将修改加入暂存区
# 再次修改文件内容
git commit -m '我是commitshuoming'
```
这是使用`git status`查看，你会发现，第二次修改的内容没有被commit，因为它没有被添加到暂存区。
**这也说明，Git管理的是修改，而非文件。**

## 查看历史

```
git log
```

## 回滚

因为Git有工作区、暂存区和本地仓库，所以回滚代码有多种情况：

### 第一种，未commit，也未add

这种情况，变更内容只在工作区，执行以下命令即可，撤销文件的全部变更内容，**但要注意，一旦撤销，就没有后悔药了**。
```
git checkout -- <file>
```

### 第二种，未commit，但已add

执行以下命令，可以从暂存区撤销修改，重新放回工作区
```
git reset HEAD <file>
```
然后就可以参照*第一种*了

### 第三种，已commit

**注意，执行以下操作后，工作区和暂存区中为commit的变更都会丢失。**

需要告诉Git你要回滚到哪个版本。
有三种形式：
1. 版本号
使用`git log`可以查看到版本号
（不需要把整个版本号都输入，只输入前几位就行，Git会自动匹配）
2. HEAD^
HEAD ： 代表当前版本
HEAD^ : 代表上一版本
HEAD^^ : 代表上上一版本
...
3. HEAD~
HEAD~100 : 代表往上100个版本

使用以下命令进行回滚
```
git reset --hard HEAD^ # 回滚到上一个版本，注意跟*第二种*的区别，这里有参数`--hard`
```

## 后悔回滚了怎么办？

```
git reflog # 查看命令历史，可以查看你执行过的操作
```

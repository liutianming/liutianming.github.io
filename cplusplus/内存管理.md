---
title: C++内存管理
---
## 内存区
C++中除 ***代码区*** 外，可分为5个内存区:
* **栈**：局部变量，栈内存分配运算内置于处理器的指令集中，效率很高，但容量有限
* **堆**：由`new`分配的内存块
* **自由存储区**：由`malloc`分配的内存块（与**堆**十分相似）
* **全局/静态存储区**：全局变量和静态变量，程序启动时分配，声明时初始化
* **常量存储区**：常量，如常量字符串`char* p = "thomasl007"`<br/>
*注：有`const`前缀的局部变量，存放在栈区，而非常量区。`const`只是限定改量不能修改*

**堆**和**自由存储区**可以合称为**动态存储区**

### 堆 和 栈

通过一个示例来分析：
```
int* p = new int[5];
```
首先，看到`new`，我们知道，我们分配了一块**堆**内存，而`*p`占据一块**栈**内存。<br/>
所以这条语句的含义是：在**栈内存**中分配了一个指向一块**堆内存**的变量`*p`

## 成员变量的内存分配

成员变量的内存分配要符合对齐原则，若中间的长，就以中间的为准
